<!-- src/app/features/user-management/user-management.component.html -->
<div class="user-management-container">
  <h2>User Management</h2>

  <p-table [value]="users" [loading]="loading" responsiveLayout="scroll" styleClass="p-datatable-sm">
    <ng-template pTemplate="header">
      <tr>
        <th>Username</th>
        <th>Email</th>
        <th>Full Name</th>
        <th>Total Rewards</th>
        <th>Role</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
      <tr>
        <td>{{user.userName}}</td>
        <td>{{user.email}}</td>
        <td>{{user.fullName}}</td>
        <td>{{user.totalRewards || 0}}</td>
        <td>{{user.role || (user.roles && user.roles.length > 0 ? user.roles[0] : 'None')}}</td>
        <td>
          <p-dropdown
            [options]="roles"
            optionLabel="name"
            optionValue="value"
            [ngModel]="user.role || (user.roles && user.roles.length > 0 ? user.roles[0] : null)"
            (onChange)="updateUserRole(user, $event.value)"
            appendTo="body">
          </p-dropdown>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="7" class="empty-message">No users found</td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-toast></p-toast>
